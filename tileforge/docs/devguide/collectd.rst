==========
 Collectd
==========

This document describes how does collectd works.

Overview
========

 #. The tile forge generate a file in the file
    ``/var/sig/tileforge/stats/layerName``. 
 #. The ``tileforge-stat.sh`` script reads all the files in the folder
    ``/var/sig/tileforge/stats/`` and send the data the the collectd
    local deamon throw standard messages. 
 #. Each local daemon send the data to the central collectd server.

Files needed to configure collectd plugin
=========================================

All those files will be available in the collectd folder of the
tileforge svn.

tileforge-client.conf
---------------------
This file should be copied in the file
``/var/lib/puppet/modules/collectd/plugins/tileforge.conf`` on the client
host.

This contains the general configuration of the plugin for collectd for
the client.

tileforge-collection.conf
-------------------------
The contents of this file should be add to the file
``/var/www/<vhost>/htdocs/collection3/etc/collection.conf``.

This is the new graph configuration for collection3, Collection3 the a
web interface that displays the collected data.

tileforge-server.conf
---------------------
This file should be copyed in the file
``/var/lib/puppet/modules/collectd/plugins/tileforge.conf`` on the server
host.

This contains the general configuration of the plugin for collectd for
the server.

tileforge-stat.sh
-----------------
This script collect the data generated by the tileforge for collectd.

tileforge-types.db
------------------
This is the new type description for collectd client and server.
